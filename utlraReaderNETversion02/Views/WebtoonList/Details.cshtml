@model WebtoonInfo
@{
    var webtoonName = ViewData["WebtoonName"] as string;
    ViewData["Title"] = Model.Title;
    Layout = "_Layout";
}

<div class="container py-5">
    <div class="row g-5">
        <!-- Kapak Görseli -->
        <div class="col-md-4 text-center">
            <img src="@Url.Content($"~/webtoons/{webtoonName}/{Model.Cover ?? "default-cover.jpg"}")"
                 class="img-fluid rounded shadow" alt="@Model.Title" />
        </div>

        <!-- Bilgiler -->
        <div class="col-md-8">
            <h2 class="mb-3 fw-bold">@Model.Title</h2>
            <div class="mb-2"><strong>Yazar:</strong> @Model.Author</div>
            <div class="mb-2"><strong>Tür:</strong> @Model.Genre</div>
            <div class="mb-2"><strong>Durum:</strong> @Model.Status</div>
            <div class="mb-4">
                <strong>Açıklama:</strong>
                <p class="mt-1 text-muted">@Model.Description</p>
            </div>

            <div class="alert alert-warning">
                <strong>Not:</strong> Bölümleri görmek için lütfen
                <a href="/Identity/Account/Login" class="alert-link">giriş yapın</a>.
            </div>
        </div>
    </div>

    <!-- Bölüm Listesi -->
    @if (Model.Chapters != null && Model.Chapters.Any())
    {
        <hr />
        <h4 class="mt-5 mb-3">Bölümler</h4>
        <ul class="list-group">
            @foreach (var chapter in Model.Chapters.OrderByDescending(c => c.Number))
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a asp-controller="Webtoon" asp-action="ReadChapter" asp-route-name="@webtoonName" asp-route-chapter="@chapter.Number">
                        Bölüm @chapter.Number - @chapter.Title
                    </a>
                    <span class="text-muted small">@chapter.ReleaseDate.ToShortDateString()</span>
                </li>
            }
        </ul>
    }
</div>
